# 道路建設計画支援システムドキュメント

## 目次

- [システムの概要](#chapter1)
- [実行環境とビルド方法](#chapter2)
- [入力について](#chapter3)
- [基本的な利用方法](#chapter4)
    - [入力ファイルの用意/入力](#chapter4-1)
    - [システムの利用(統合版)](#chapter4-2)
    - [出力の見方](#chapter4-3)
    - [各小課題を解く](#chapter4-4)
- [source/main.pyでの実行](#chapter5)
- [テストデータ生成器について](#chapter6)
- [ビジュアライザの不具合について](#chapter7)

<a id="chapter1"></a>

## システムの概要

本システムでは入力から道路網を構築し, ある地点からある地点への経路探索や新たな地点を適切に追加して道路網の更新等を可能にします.

プログラムのソースは, sourceディレクトリにあります.

``` sh
source
├── Modules
│   ├── input.py
│   ├── manager.py
│   ├── path.py
│   ├── plot.py
│   ├── segments.py
├── main.py
├── main2.py
├── setup.py
├── test.py
└── static
    ├── input.txt
    ├── requirements.txt
    └── testdata
        └── testdataα-β.txt
```

<a id="chapter2"></a>

## 実行環境とビルド方法

実行環境として,

- [Python 3.7.2](https://www.python.org/downloads/release/python-372/)
- Mac OS

を想定します(WindowsやUnixだとプロット図の表示でエラーが発生する可能性が高い).

その他必要なモジュールのインストールは, **setup.py** で行います.

``` sh
$ git clone git@github.com:ie03-aizu-2019/ie03project-skys.git
$ python3 setup.py
```

｢正常にセットアップが完了しました｣と表示されれ, 環境構築は終了です.

<a id="chapter3"></a>

## 入力について

入力は以下のオプションを用いておこなう。オプションによって入力方法が異なる。
``` markup
-i : 手入力
-td : 予め用意されたテストデータを使う
-f : input.txtをテストデータとして使う
```

<a id="chapter4"></a>

## 基本的な利用方法

システムの利用方法は,

1. **source/main.py**
2. **source/main2.py**

の2種類が用意されていますが, より分かりやすいmain2.pyを推奨します.

<a id="chapter4-1"></a>

### ① 入力ファイルの用意/入力
1.**手入力**
``` markup
入力、出力の例(小課題1)
入力----------------------------
python3 -i 1
4 2 0 0
0 0
5 5
2 5
7 1
1 2
3 4
--------------------------------
出力----------------------------
3.66667 3.66667
--------------------------------
```
2.**予め用意されたテストデータを使う**
``` markup
テストデータには通常ケース、最小ケース、最大ケース、特殊ケースの4種類がある。
args[3]に入る値でケースを分岐させる。
1-通常
2−最小
3−最大
4-特殊
(特殊ケースが複数ある場合は5から順に番号が振ってある。)

入力、出力の例(小課題2の通常ケース)
入力----------------------------
python3 -td 2 1
--------------------------------
出力----------------------------
3.66667 3.66667
4.86885 2.70492
5.86957 3.26087
--------------------------------
```
3.**input.txtをテストデータとして使う**
``` markup
入力、出力の例(小課題3)
入力----------------------------
python3 -f 3
--------------------------------
出力----------------------------
7.07107
6.10882
5.88562
NA
2.68432
--------------------------------
```



<a id="chapter4-2"></a>

### ② システムの利用(統合版)

``` sh
$ cd path/to/source
$ python3 main2.py -f 9 1
```

を実行することで, システムを利用できます.


``` markup
小課題9の条件分岐について

- P = 0 かつ Q = 0 → 小課題2、8
- P != 0 → 小課題7
- Q != 0 → 小課題6
- P != 0 かつ Q != 0 → 小課題6,7
```

<a id="chapter4-3"></a>

### ③ 出力の見方

``` markup
出力例(小課題8の通常ケース)

出力例-------------------------------------
7 8 0 0       # 入力値
1 3
4 4
2 0
8 3
10 0
11 5
13 2
1 2
1 3
2 3
2 4
4 5
4 6
5 7
6 7

# 小課題8の実行
入力情報を受け取りました(時間: 0.00017095秒)  # 入力情報を受け取るまでにかかる
全交差点を算出しました(時間: 0.00025439秒) # 全交差地点を算出するまでにかかる時間
2 4
プログラムの実行が終了しました(時間: 0.00154376秒) # プログラムの実行が終了するまでにかかる時間
合計時間: 0.00196910秒

# 詳細データ
N(Number of Points)		: 7
M(Number of Segments)		: 8
P(Number of adding Points)	: 0
Q(Number of Roots)		: 0
-- Points --  # 座標の詳細データ
1: (1, 3) ['1', '2']
2: (4, 4) ['1', '3', '4']
3: (2, 0) ['2', '3']
4: (8, 3) ['4', '5', '6']
5: (10, 0) ['5', '7']
6: (11, 5) ['6', '8']
7: (13, 2) ['7', '8']
-- Segments -- # 線分情報の詳細データ
1: 1(1, 3) -> 2(4, 4) ['1', '2']
2: 1(1, 3) -> 3(2, 0) ['1', '3']
3: 2(4, 4) -> 3(2, 0) ['2', '3']
4: 2(4, 4) -> 4(8, 3) ['2', '4']
5: 4(8, 3) -> 5(10, 0) ['4', '5']
6: 4(8, 3) -> 6(11, 5) ['4', '6']
7: 5(10, 0) -> 7(13, 2) ['5', '7']
8: 6(11, 5) -> 7(13, 2) ['6', '7']
-- Added Points -- # 追加された座標情報の詳細データ
-- Roots -- # 道路網情報の詳細データ

# プロット図の表示

-------------------------------------------
```

<a id="chapter4-4"></a>

### ④ source/main2.py から各小課題を解く

``` markup
各小課題番号が解く課題

1− 交差地点の検出
2- 交差地点の列挙
3-  最短経路の距離
4- 最短経路
5- 第 K 最短路
6- 複数の経路の提案
7- 最適な道の建設提案 最適な道の建設提案
8- 幹線道路の検出
9- 道路網建設計画支援システム
10- 特殊な大規模データ
11- 一般的な大規模データ

小課題番号の指定はどの入力方法でもargs[2]でおこなう。
入力例(小課題1を指定(input.txtから読み取るとき))-----------
python3 -f
-----------------------------------------------------------
```

<a id="chapter5"></a>

## source/main.py の利用

``` markup
詳細データが出力されない点などあるが、大部分の仕様はmain2.pyと同様である。
```

<a id="chapter6"></a>

## テストデータ生成器

``` markup
test.pyを用いることによって最小ケースと最大ケースのテストデータを得る。
```

<a id="chapter7"></a>

## プロット不具合

``` markup
matplotlibrcを用いることによってプロットの不具合を修正。
```
