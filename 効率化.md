# 効率化について

Ex10が特殊な(垂直 or 水平)な大規模データ, Ex11が一般的な大規模データでも動作するようにアルゴリズムを修正するというものだったので,
全体的な効率化の指針を立てる.

## ※アルゴリズムの修正について

直書きで修正するのはリスキーなので, アルゴリズム修正用のブランチにわけてから治すように.

## 交差地点の検出(Ex1, 2)

- 既に挿入位置の決定に2分探索を用いるように修正してあるので, 最大入力に対しても問題なく全ての交差点を得られる(かかっても2秒程度のはず)
- クイックソート版(all-intersections-v2)も作ったけど, 元の実装のが高速だった, 他のアルゴリズムのソートに変えればもっと高速化できるかも.

## 経路探索と距離(Ex3~6)

探索済みルートリストへの追加を, ソートしながら追加するように変更して, 第K経路までの探索なら, 探索済みルートリスト\[K\].distanceよりも距離をオーバーした再起を全て打ち切っていくように修正した. 経路が一定数見つかりさえすれば高速に終わる.

ただ, それでも現状は M = 10^4ですらきつい.

アイディアとしては,

1. 経由点探索中にも見つかった経路情報を保存していって, 既に探索済みの経路を参照して効率化(ただ保存の手間がかかるので速度面でマイナスも大きい気がする)
2. 総当たりではなく, 経路になりそうな線分と点を選んで優先的に再起していく(指定数さえ見つければ探索を打ち切れるので強い)
3. 並列化, 再帰的なアルゴリズムを使っているのでマルチスレッドを使えばアムダールして高速化できそう

とりあえず, 2と3が現実的でかつ効果も期待できそう

## 道路網に追加点の接続(Ex7)

- オーダーがO(N)なのでそもそも高速.
- アルゴ的には総当たりで良くないけど, 総当たりせずに例外なく最短な接続先を探すのはかなり難しい(始点終点だけの情報で除去できない)ので簡単には効率化できないしそもそも高速だから優先度低. 余裕があったら考えよう.

## 幹線経路の探索(Ex8)

- 越川実装はよ
