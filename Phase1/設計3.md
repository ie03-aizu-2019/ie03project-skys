# 小課題3&4 設計

## 基本設計
- 全ての地点と交差点と線分に番号をつけて管理するこれらを管理するManagerクラスを定義する
- 地点と交差点と線分は(C)1~Xのインデックスで入力を得るので, 対応させるためにリストではなくディクショナリを用いる(1からインデックスを振る)
- ルートを得るために, 各点と各線分にそれぞれ接する線分と点のリストをもたせる(地点はsegmentsインスタンス生成時に, 交差点は交点探索時に, 線分はsegmentsインスタンス生成時と交差点探索時に接している点/線分情報を保存する)
- 点→線分→点と辿り, 終点(接点/線がない)あるいは既に通った点にたどり着いた時点でその道の探索を終える. これをあらゆる接点/接戦に対して行うことで全てのルートを得る
- 最短ルート探索と同時に点同士の距離を加算していくことで全てのルートは距離付きで求まる. もっとも小さいものが最短ルートである


## 効率化のために

- 見つけた最短ルートを残しておくことで, 他の点から点への最短ルート探索時に効率化する(1)
- A->BとB->Aは本質的に同じことなので以下のルールに則って道順を記録しておく.
1. 地点と交差点なら地点を始点とする
2. 地点同士あるいは交差点同士なら若いインデックスを始点とする
- また, 線分ABの最短ルートは(直線だから明らかに)A->Bであるから, 始点終点に対応する線分がある場合は探索をそれ以降の探索をせず最短ルートを決定する(2)

## roots

効率化のために - (1)のために使うrootsプロパティ(in Managerクラス)

``` python
roots[始点インデックス] = {
    終点インデックス: [経由点情報, 距離],
    # 経由点情報はリストで [点1, 交点3, 交点2, 点2]
    # 全てのsegmentsに対して始点終点のリストをsetする関数も定義(これで効率化のために(2)を実現する), 経由点情報と距離情報も含めセットする
}
```
